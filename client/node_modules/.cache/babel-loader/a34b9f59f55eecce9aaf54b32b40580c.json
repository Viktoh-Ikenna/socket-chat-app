{"ast":null,"code":"var _jsxFileName = \"/home/chidex/Documents/Socket-Chat-App-main/client/src/App.js\";\nimport React, { useState, useEffect } from \"react\";\nimport io from \"socket.io-client\";\nimport { ShowOnline } from './showOnline';\nimport \"./App.css\";\nlet socket;\nconst CONNECTION_PORT = \"localhost:3002/\";\n\nfunction App() {\n  // Before Login\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [userName, setUserName] = useState(\"\");\n  const [me, setme] = useState(\"\");\n  const [choosen, setchosen] = useState({}); // After Login\n\n  const [message, setMessage] = useState(\"\");\n  const [messageList, setMessageList] = useState([]);\n  const [userList, setUsers] = useState([]);\n  useEffect(() => {\n    socket = io(CONNECTION_PORT);\n  }, [CONNECTION_PORT]);\n  useEffect(() => {\n    socket.on(\"receive_message\", data => {\n      setMessageList(data); // console.log(data)\n    });\n  }, []);\n  useEffect(() => {\n    socket.on(\"online_users\", data => {\n      // setMessageList([...messageList, data]);\n      setUsers(data); // console.log(data)\n    });\n  }, [loggedIn]);\n  useEffect(() => {\n    socket.on(\"me\", data => {\n      // setMessageList([...messageList, data]);\n      setme(data); // console.log(data)\n    });\n  }, []);\n\n  const connectToRoom = async () => {\n    await socket.emit(\"online\", userName);\n    setLoggedIn(true);\n  };\n\n  const sendMessage = async () => {\n    if (choosen.id) {\n      let messageContent = {\n        to: choosen.id,\n        from: me,\n        content: {\n          author: userName,\n          message: message\n        }\n      };\n      await socket.emit(\"send_message\", messageContent);\n      setMessageList([...messageList, messageContent]);\n      setMessage(\"\");\n    }\n  };\n\n  const handlechats = e => {\n    const elements = JSON.parse(e.target.dataset.id);\n    setchosen(elements);\n  }; // console.log(messageList)\n\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }\n  }, !loggedIn ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"logIn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inputs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Name...\",\n    onChange: e => {\n      setUserName(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: connectToRoom,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 11\n    }\n  }, \"Enter Chat\")) : /*#__PURE__*/React.createElement(ShowOnline, {\n    me: me,\n    choosen: choosen,\n    handleIn: handlechats,\n    messageList: messageList,\n    users: userList,\n    setMessage: setMessage,\n    sendMessage: sendMessage,\n    userName: userName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 11\n    }\n  }));\n}\n\nexport default App;","map":{"version":3,"sources":["/home/chidex/Documents/Socket-Chat-App-main/client/src/App.js"],"names":["React","useState","useEffect","io","ShowOnline","socket","CONNECTION_PORT","App","loggedIn","setLoggedIn","userName","setUserName","me","setme","choosen","setchosen","message","setMessage","messageList","setMessageList","userList","setUsers","on","data","connectToRoom","emit","sendMessage","id","messageContent","to","from","content","author","handlechats","e","elements","JSON","parse","target","dataset","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport io from \"socket.io-client\";\nimport {ShowOnline} from './showOnline'\nimport \"./App.css\";\n\nlet socket;\nconst CONNECTION_PORT = \"localhost:3002/\";\n\nfunction App() {\n  // Before Login\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [userName, setUserName] = useState(\"\");\n  const [me, setme] = useState(\"\");\n  const [choosen,setchosen]=useState({})\n\n  // After Login\n  const [message, setMessage] = useState(\"\");\n  const [messageList, setMessageList] = useState([]);\n  const [userList,setUsers]=useState([]);\n\n  useEffect(() => {\n    socket = io(CONNECTION_PORT);\n  }, [CONNECTION_PORT]);\n\n  useEffect(() => {\n    socket.on(\"receive_message\", (data) => {\n      setMessageList(data);\n      // console.log(data)\n    });\n  },[]);\n  useEffect(() => {\n    socket.on(\"online_users\", (data) => {\n      // setMessageList([...messageList, data]);\n      setUsers(data)\n      // console.log(data)\n    });\n  },[loggedIn]);\n  useEffect(() => {\n    socket.on(\"me\", (data) => {\n      // setMessageList([...messageList, data]);\n      setme(data)\n      // console.log(data)\n    });\n  },[]);\n\n\n  \n  const connectToRoom = async() => {\n    \n   await socket.emit(\"online\", userName);\n   \n    setLoggedIn(true);\n  };\n  const sendMessage = async () => {\n    if(choosen.id){\n      let messageContent = {\n        to: choosen.id,\n        from:me,\n        content: {\n          author: userName,\n          message: message,\n        },\n      };\n  \n      await socket.emit(\"send_message\", messageContent);\n      setMessageList([...messageList, messageContent]);\n      setMessage(\"\");\n    }\n   \n  };\n\n  const handlechats=(e)=>{\nconst elements =JSON.parse(e.target.dataset.id);\nsetchosen(elements)\n  }\n  // console.log(messageList)\n  return (\n    <div className=\"App\">\n      {!loggedIn ? (\n        <div className=\"logIn\">\n          <div className=\"inputs\">\n            <input\n              type=\"text\"\n              placeholder=\"Name...\"\n              onChange={(e) => {\n                setUserName(e.target.value);\n              }}\n            />\n          </div>\n          <button onClick={connectToRoom}>Enter Chat</button>\n        </div>\n      ) : <ShowOnline me={me} choosen={choosen} handleIn={handlechats} messageList={messageList} users={userList} setMessage={setMessage} sendMessage={sendMessage} userName={userName}/>}\n  </div>\n  )}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}